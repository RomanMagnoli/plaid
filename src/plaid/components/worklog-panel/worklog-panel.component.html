<div
  class="panel-outer"
  [class.add-hint]="!worklog.issue"
  [class.too-low]="tooLow"
  [class.undersized]="undersized"
  [ngStyle]="{
    width: 'calc(' + panelWidth * 100 + '% + 1px)',
    height: panelHeight + 1 + 'px',
    top: panelOffsetTop + 'px',
    left: 'calc(' + panelOffsetLeft * 100 + '% - 1px)'
  }"
>
  <div
    #panelInner
    class="panel-inner"
    [class.currently-edited]="currentlyEdited"
    [ngStyle]="worklog.issue ? {
      maxHeight: panelHeight + 1 + 'px',
      backgroundColor: 'hsl(' + panelHue + ', ' + (darkMode ? 40 : 60 ) + '%, ' + (darkMode ? 20 : 92 ) + '%)',
      borderColor: 'hsl(' + panelHue + ', 50%, ' + (darkMode ? 40 : 60 ) + '%)'
    } : {}"
  >
    <div class="panel-content" *ngIf="worklog.issue">
      <a
        class="button edit-button"
        title="Edit log"
        (click)="edit.emit()"
      >
        <svg class="icon"><use href="assets/icons.svg#edit"></use></svg>
      </a>
      <p
        class="parent-name"
        *ngIf="worklog.issue.fields.parent"
        [plaidExtHref]="jiraURL + '/browse/' + worklog.issue.fields.parent.key"
        title="Show parent issue"
      >
        <svg class="icon-parent"><use href="assets/icons.svg#parent"></use></svg>
        <b>{{ worklog.issue.fields.parent.key }}</b>
        {{ worklog.issue.fields.parent.fields.summary }}
      </p>
      <p
        class="name"
        [plaidExtHref]="jiraURL + '/browse/' + worklog.issue.key"
        title="Show issue"
      >
        <b>{{ worklog.issue.key }}</b>
        {{ worklog.issue.fields.summary }}
      </p>
      <p class="fields">
        <img
          *ngIf="worklog.issue.fields.issuetype"
          [src]="worklog.issue.fields.issuetype.iconUrl"
          [title]="worklog.issue.fields.issuetype.name"
          class="field-icon"
        >
        <img
          *ngIf="worklog.issue.fields.priority"
          [src]="worklog.issue.fields.priority.iconUrl"
          [title]="worklog.issue.fields.priority.name"
          class="field-icon"
        >
        {{ components }}
      </p>
      <p class="time">
        {{ timeRange }}
      </p>
      <pre class="comment">{{ worklog.comment?.trim() }}</pre>
    </div>
    <div class="panel-content" *ngIf="!worklog.issue">
      <a
        class="button add-button"
        title="Add log"
        (click)="edit.emit()"
        [style.top.px]="panelHeight / 2 - 15"
      ><svg class="icon"><use href="assets/icons.svg#plus"></use></svg></a>
    </div>
  </div>
</div>
